<!DOCTYPE html>
<html>
  <head>
    <title>OuiBounce Testing Page</title>
    <!-- Add OuiBounce JS -->
    <script src="../dist/mautic-modal.js"></script>
    <link href="../dist/css/mautic-modal.css" rel="stylesheet">
  </head>

  <body>
    <!-- Example page instructions -->
    <h1>Try leaving this page to fire OuiBounce</h1>

    <div class="modal-content" id="subscribe-modal">
      <div class="modal-header">
        <h3 class="modal-title">Não esqueça de subscrever o Blog!</h3>
      </div>

      <div class="modal-body">
        <p>Fique a par de todas as maneiras de promover o seu Negócio</p>
        <form method="post" action="http://inbound.easyeasyapps.net/form/submit?formId=9" id="mauticform_blogsubscription" data-mautic-form="blogsubscription">
          <div class="mauticform-error" id="mauticform_blogsubscription_error"></div>
          <div class="mauticform-message" id="mauticform_blogsubscription_message"></div>
          <input type="hidden" id="mauticform_input_blogsubscription_locale" name="mauticform[locale]" value="es" class="mauticform-hidden" />
          <input type="hidden" id="mauticform_input_blogsubscription_usersegment" name="mauticform[usersegment]" value="" class="mauticform-hidden" />
          <input type="hidden" name="mauticform[formId]" id="mauticform_blogsubscription_id" value="9" />
          <input type="hidden" name="mauticform[return]" id="mauticform_blogsubscription_return" value="" />
          <input type="hidden" name="mauticform[formName]" id="mauticform_blogsubscription_name" value="blogsubscription" />
          <div id="mauticform_blogsubscription_email" data-validate="email" data-validation-type="email" class="mauticform-row mauticform-email mauticform-required form-group form-group-lg">
            <label for="mauticform[email]" class="control-label">Seu email</label>
            <input id="mauticform_input_blogsubscription_email" name="mauticform[email]" value="" class="mauticform-input form-control" type="email" />
            <span class="mauticform-errormsg" style="display: none;">Campo Obrigatório</span>
          </div>
          <div class="text-right">
            <a class="btn btn-link close">Não obrigado</a>
            <button type="submit" name="mauticform[submit]" id="mauticform_input_blogsubscription_submit" name="mauticform[submit]" value="" class="mauticform-button btn btn-success btn-lg" value="1">Subscrever</button>
          </div>

        </form>
      </div>
    </div>

    <script>
    var modal = MauticModal(document.getElementById("subscribe-modal"), {
      "ouibounce": {
        aggressive: true,
        timer: 0,
        callback: function() { console.log('ouibounce fired!') }
      },

      "mauticFormId": "blogsubscription",
      "mauticDomain": 'http://inbound.easyeasyapps.net',
      "onSubmit": function() {
        var el = document.getElementById("mauticform_input_blogsubscription_email");
        console.log({
          "event": "formSubmition",
          "formId": "blogsubscription",
          "email": el && el["value"]
        });
        // dataLayer.push();
      }
    });
    </script>
  </body>
</html>
